<template>
  <div v-if="loaded">
    <div v-if="customer" id="mc_embed_signup">
      <form
        id="mc-embedded-subscribe-form"
        action="https://anddine.us1.list-manage.com/subscribe/post?u=29173e9d989a5e2c822838e35&amp;id=b16e6a4c57"
        method="post"
        name="mc-embedded-subscribe-form"
        class="validate join-form"
        target="_blank"
        novalidate
      >
        <div id="mc_embed_signup_scroll">
          <img class="join-form__logo" src="~/assets/images/falling-logo.png" />
          <h3 class="join-form__title">Coming soon</h3>
          <h4 class="join-form__body">
            We're working on it... We will notify you as soon as we arrive!
          </h4>
          <h4 class="join-form__required">Required fields *</h4>
          <div class="mc-field-group">
            <label for="mce-FNAME">First Name </label>
            <input id="mce-FNAME" type="text" value="" name="FNAME" class="" />
          </div>
          <div class="mc-field-group">
            <label for="mce-LNAME">Last Name </label>
            <input id="mce-LNAME" type="text" value="" name="LNAME" class="" />
          </div>
          <div class="mc-field-group">
            <label for="mce-EMAIL"
              >Email Address <span class="asterisk">*</span>
            </label>
            <input
              id="mce-EMAIL"
              type="email"
              value=""
              name="EMAIL"
              class="required email"
            />
          </div>
          <div id="mce-responses" class="clear">
            <div
              id="mce-error-response"
              class="response"
              style="display: none"
            ></div>
            <div
              id="mce-success-response"
              class="response"
              style="display: none"
            ></div>
          </div>
          <div style="position: absolute; left: -5000px" aria-hidden="true">
            <input
              type="text"
              name="b_29173e9d989a5e2c822838e35_b16e6a4c57"
              tabindex="-1"
              value=""
            />
          </div>
          <div class="clear">
            <input
              id="mc-embedded-subscribe"
              type="submit"
              value="Subscribe"
              name="subscribe"
              class="button"
            />
          </div>
        </div>
      </form>
    </div>
    <div v-else id="mc_embed_signup">
      <form
        id="mc-embedded-subscribe-form"
        action="https://anddine.us1.list-manage.com/subscribe/post?u=29173e9d989a5e2c822838e35&amp;id=5c8512abdc"
        method="post"
        name="mc-embedded-subscribe-form"
        class="validate join-form"
        target="_blank"
        novalidate
      >
        <div id="mc_embed_signup_scroll">
          <img class="join-form__logo" src="~/assets/images/popup-pink.png" />
          <h3 class="join-form__title">About you</h3>
          <h4 class="join-form__body">
            Please fill in the details below and our team will be in touch soon.
          </h4>
          <h4 class="join-form__required">All fields are required*</h4>
          <div class="mc-field-group">
            <label for="mce-FNAME"
              >First Name <span class="asterisk">*</span>
            </label>
            <input
              id="mce-FNAME"
              type="text"
              value=""
              name="FNAME"
              class="required"
            />
          </div>
          <div class="mc-field-group">
            <label for="mce-LNAME"
              >Last Name <span class="asterisk">*</span>
            </label>
            <input
              id="mce-LNAME"
              type="text"
              value=""
              name="LNAME"
              class="required"
            />
          </div>
          <div class="mc-field-group">
            <label for="mce-EMAIL"
              >Email Address <span class="asterisk">*</span>
            </label>
            <input
              id="mce-EMAIL"
              type="email"
              value=""
              name="EMAIL"
              class="required email"
            />
          </div>
          <div class="mc-field-groups">
            <label for="mce-PHONE"
              >Phone Number <span class="asterisk">*</span>
            </label>
            <input
              id="mce-PHONE"
              type="text"
              name="PHONE"
              class="required"
              value=""
            />
          </div>
          <div class="mc-field-group">
            <label for="mce-MMERGE6"
              >Post Code <span class="asterisk">*</span>
            </label>
            <input
              id="mce-MMERGE6"
              type="text"
              value=""
              name="MMERGE6"
              class="required"
            />
          </div>
          <div class="mc-field-group">
            <label for="mce-MMERGE7"
              >Cuisine <span class="asterisk">*</span>
            </label>
            <select id="mce-MMERGE7" name="MMERGE7" class="required">
              <option value=""></option>
              <option value="Afghan">Afghan</option>
              <option value="African">African</option>
              <option value="American">American</option>
              <option value="Argentinian">Argentinian</option>
              <option value="Asian">Asian</option>
              <option value="Asian Fusion">Asian Fusion</option>
              <option value="Austrian">Austrian</option>
              <option value="Bakery">Bakery</option>
              <option value="Bangladeshi">Bangladeshi</option>
              <option value="Belgian">Belgian</option>
              <option value="Brazilian">Brazilian</option>
              <option value="Breakfast">Breakfast</option>
              <option value="British">British</option>
              <option value="Brunch">Brunch</option>
              <option value="Cafe">Cafe</option>
              <option value="Canadian">Canadian</option>
              <option value="Cantose">Cantose</option>
              <option value="Chinese">Chinese</option>
              <option value="Cuban">Cuban</option>
              <option value="Dessert">Dessert</option>
              <option value="Drinks">Drinks</option>
              <option value="Dutch">Dutch</option>
              <option value="Egyptian">Egyptian</option>
              <option value="Emirati">Emirati</option>
              <option value="Ethiopian">Ethiopian</option>
              <option value="Filipino">Filipino</option>
              <option value="French">French</option>
              <option value="German">German</option>
              <option value="Greek">Greek</option>
              <option value="Grocery">Grocery</option>
              <option value="Hawaiian">Hawaiian</option>
              <option value="Healthy">Healthy</option>
              <option value="Hong Kongese">Hong Kongese</option>
              <option value="Indian">Indian</option>
              <option value="Indonesian">Indonesian</option>
              <option value="Iranian">Iranian</option>
              <option value="Irish">Irish</option>
              <option value="Israeli">Israeli</option>
              <option value="Italian">Italian</option>
              <option value="Jamaican">Jamaican</option>
              <option value="Japanese">Japanese</option>
              <option value="Korean">Korean</option>
              <option value="Kuwaiti">Kuwaiti</option>
              <option value="Latin American">Latin American</option>
              <option value="Labanese">Labanese</option>
              <option value="Malaysian">Malaysian</option>
              <option value="Mediterranean">Mediterranean</option>
              <option value="Mexican">Mexican</option>
              <option value="Middle Eastern">Middle Eastern</option>
              <option value="Moroccan">Moroccan</option>
              <option value="Nepalese">Nepalese</option>
              <option value="Nigerian">Nigerian</option>
              <option value="Pakistani">Pakistani</option>
              <option value="Peking">Peking</option>
              <option value="Peruvian">Peruvian</option>
              <option value="Polish">Polish</option>
              <option value="Portuguese">Portuguese</option>
              <option value="Romanian">Romanian</option>
              <option value="Russian">Russian</option>
              <option value="Shanghainese">Shanghainese</option>
              <option value="Sichuan">Sichuan</option>
              <option value="Singaporean">Singaporean</option>
              <option value="South Indian">South Indian</option>
              <option value="Spanish">Spanish</option>
              <option value="Sri Lankan">Sri Lankan</option>
              <option value="Suriname">Suriname</option>
              <option value="Syrian">Syrian</option>
              <option value="Taiwanese">Taiwanese</option>
              <option value="Thai">Thai</option>
              <option value="Tibetan">Tibetan</option>
              <option value="Turkish">Turkish</option>
              <option value="Venezuelan">Venezuelan</option>
              <option value="Vietnamese">Vietnamese</option>
              <option value="Western">Western</option>
              <option value="Other">Other</option>
            </select>
          </div>
          <div id="mce-responses" class="clear">
            <div
              id="mce-error-response"
              class="response"
              style="display: none"
            ></div>
            <div
              id="mce-success-response"
              class="response"
              style="display: none"
            ></div>
          </div>
          <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
          <div style="position: absolute; left: -5000px" aria-hidden="true">
            <input
              type="text"
              name="b_29173e9d989a5e2c822838e35_5c8512abdc"
              tabindex="-1"
              value=""
            />
          </div>
          <div class="clear">
            <input
              id="mc-embedded-subscribe"
              type="submit"
              value="Subscribe"
              name="subscribe"
              class="button"
            />
          </div>
        </div>
      </form>
    </div>
  </div>
</template>

<script>
export default {
  name: 'JoinForm',
  props: {
    customer: {
      type: Boolean,
      default: false,
      required: false,
    },
  },
  data: () => ({
    loaded: false,
  }),
  mounted() {
    this.setupMailchimpSeller()
  },
  methods: {
    setupMailchimpSeller() {
      const chimpValidate = document.createElement('script')
      chimpValidate.src =
        'https://s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'

      if (this.customer) {
        const chimpCustomer = document.createElement('script')
        chimpCustomer.appendChild(
          document.createTextNode(
            `(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';fnames[4]='PHONE';ftypes[4]='phone';}(jQuery));var $mcj = jQuery.noConflict(true);`
          )
        )
        document.body.appendChild(chimpCustomer)
      } else {
        const chimpSeller = document.createElement('script')
        chimpSeller.appendChild(
          document.createTextNode(
            `(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';fnames[4]='PHONE';ftypes[4]='text';fnames[0]='EMAIL';ftypes[0]='email';fnames[6]='MMERGE6';ftypes[6]='text';fnames[7]='MMERGE7';ftypes[7]='dropdown';fnames[3]='ADDRESS';ftypes[3]='address';fnames[5]='BIRTHDAY';ftypes[5]='birthday';}(jQuery));var $mcj = jQuery.noConflict(true);`
          )
        )
        document.body.appendChild(chimpSeller)
      }

      document.body.appendChild(chimpValidate)
      this.loaded = true
    },
  },
}
</script>

<style lang="scss">
$desktop: 1024px;
$tablet: 768px;
$mobile: 600px;

.join-form {
  background-color: var(--color-white-1);
  border-radius: 15px;
  padding: 10px 30px;
  &__logo {
    width: 200px;
    margin: 0 auto;
    display: flex;
  }
  &__body {
    color: var(--color-grey-1);
    margin: 0 0 20px 0;
  }
  &__required {
    color: var(--color-pink-1);
    margin: 0 0 20px 0;
  }
  .asterisk {
    color: var(--color-pink-1);
  }
  .mc-field-group {
    display: grid;
    margin: 10px 0;
    input,
    select {
      width: 100%;
      height: 30px;
      border-radius: 5px;
      border: 1px solid var(--color-grey-2);
      background-color: var(--color-white-1);
    }
    select {
      height: 34px;
      width: 101%;
    }
    div.mce_inline_error {
      background-color: var(--color-white-1) !important;
      color: var(--color-pink-1) !important;
      margin: 0 !important;
      padding: 10px 0 !important;
    }
    input.mce_inline_error {
      border: 1px solid var(--color-pink-1) !important;
    }
  }
  .response {
    a {
      text-decoration: none;
      color: var(--color-pink-1) !important;
    }
  }
  .button {
    background-color: var(--color-pink-1);
    color: var(--color-white-1);
    width: 101%;
    height: 50px;
    border: 1px solid var(--color-pink-1);
    border-radius: 5px;
    margin: 10px 0;
    cursor: pointer;
    font-family: 'GalanoGrotesque-Bold', sans-serif;
    font-size: 20px;
    -webkit-appearance: none;
    &:hover {
      opacity: 0.9;
      transform: scale(1.02);
    }
  }
}
</style>
